<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EBC | Enhanced Biometric Confirmation</title>

<style>

/* ===== GENERAL ===== */

body {
  margin:0;
  font-family: Arial, Helvetica, sans-serif;
  background: radial-gradient(circle at top, #06283D 0%, #041C32 50%, #020c18 100%);
  color:white;
  text-align:center;
  overflow-x:hidden;
}

/* Digital grid background */
body::before {
  content:"";
  position:fixed;
  width:200%;
  height:200%;
  background-image:
    linear-gradient(rgba(0,255,255,0.05) 1px, transparent 1px),
    linear-gradient(90deg, rgba(0,255,255,0.05) 1px, transparent 1px);
  background-size:40px 40px;
  animation: moveGrid 25s linear infinite;
  z-index:0;
}

@keyframes moveGrid {
  from { transform: translate(0,0); }
  to { transform: translate(-40px,-40px); }
}

.mainContainer {
  position:relative;
  z-index:1;
  max-width:500px;
  margin:auto;
  padding:20px;
}

/* ===== HEADER ===== */

h1 {
  margin-top:30px;
  font-size:28px;
  color:#00E5FF;
}

.subtitle {
  color:#B0BEC5;
  margin-bottom:30px;
}

/* ===== BUTTON ===== */

button {
  padding:15px 40px;
  font-size:18px;
  border:none;
  border-radius:30px;
  background:#00BCD4;
  color:white;
  cursor:pointer;
  box-shadow:0 0 15px rgba(0,255,255,0.6);
  transition:0.3s;
}

button:hover {
  transform:scale(1.05);
}

/* ===== CHALLENGE BOX ===== */

#challengeBox {
  margin-top:30px;
  height:120px;
  border-radius:20px;
  background:rgba(0,0,0,0.5);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:18px;
}

/* ===== RESULT ===== */

#result {
  margin-top:20px;
  font-size:22px;
  font-weight:bold;
}

.human {
  color:#00FFAA;
  text-shadow:0 0 15px #00FFAA;
}

.notHuman {
  color:#FF4C4C;
  text-shadow:0 0 15px #FF4C4C;
}

/* ===== XYZ ===== */

#xyz {
  margin-top:20px;
  font-size:18px;
  color:#90CAF9;
}

/* ===== LOGO ===== */

#ebcLogo {
  width:150px;
  margin-top:40px;
  filter: drop-shadow(0 0 20px rgba(0,255,255,0.4));
  opacity:0.95;
}

</style>
</head>

<body>

<div class="mainContainer">

<h1>EBC | Enhanced Biometric Confirmation</h1>
<div class="subtitle">LIVE HUMAN DETECTED</div>

<button onclick="startVerification()">Run Verification</button>

<div id="challengeBox">Challenge will appear here</div>

<div id="result"></div>

<div id="xyz">X:0 | Y:0 | Z:0</div>

<img src="logo.png" id="ebcLogo">

</div>

<script>

/* ===== VARIABLES ===== */

let samples = [];
let recording = false;
let threshold = 0.11; // שולחן סף מינוס 0.11

/* ===== SENSOR ===== */

window.addEventListener("devicemotion", function(event){

  if(!recording) return;

  let x = event.accelerationIncludingGravity.x || 0;
  let y = event.accelerationIncludingGravity.y || 0;
  let z = event.accelerationIncludingGravity.z || 0;

  document.getElementById("xyz").innerText =
    "X:" + x.toFixed(2) +
    " | Y:" + y.toFixed(2) +
    " | Z:" + z.toFixed(2);

  samples.push(Math.abs(x));
  samples.push(Math.abs(y));
  samples.push(Math.abs(z));

});

/* ===== START ===== */

function startVerification(){

  samples = [];
  recording = true;
  document.getElementById("result").innerText = "";
  document.getElementById("challengeBox").innerText = "Recording 5 seconds...";

  setTimeout(finishVerification, 5000);
}

/* ===== FINISH ===== */

function finishVerification(){

  recording = false;

  let avg = samples.reduce((a,b)=>a+b,0) / samples.length;

  let resultDiv = document.getElementById("result");

  if(avg > threshold){

    resultDiv.innerText = "LIVE HUMAN DETECTED";
    resultDiv.className = "human";

  } else {

    resultDiv.innerText = "NOT HUMAN";
    resultDiv.className = "notHuman";
  }

  document.getElementById("challengeBox").innerText =
    "Challenge Score: " + Math.floor(Math.random()*21 + 80) + "%";

}

</script>

</body>
</html>
